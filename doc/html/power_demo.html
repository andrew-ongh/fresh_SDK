<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SmartSnippets DA1468x/DA15xxx SDK: Power Demo application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SmartSnippets DA1468x/DA15xxx SDK
   &#160;<span id="projectnumber">Version 1.0.14.1081</span>
   </div>
   <div id="projectbrief">Combo Bluetooth Smart and 802.15.4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Power Demo application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>This application is a simple advertising demo. It allows to configure several parameters:</p>
<ul>
<li>Advertising interval</li>
<li>Advertising channel map</li>
<li>Connection parameters (if any device connected)</li>
<li>Recharge period</li>
</ul>
<p>There are two ways of configuration: using serial console or GPIO configuration.</p>
<h2>Installation procedure</h2>
<p>The project is located in the <b><code>projects/dk_apps/demos/power_demo</code></b> folder.</p>
<p>To install the project follow the <a class="el" href="install_and_debug_procedure.html">General Installation and Debugging Procedure</a>.</p>
<h2>Usage</h2>
<h3>UART configuration</h3>
<p>The application can be controlled using the serial console exposed over UART2. To enable this function, POWER_DEMO_CLI_CONFIGURATION macro in file 'config/power_demo_config.h' must be set to 1.</p>
<p>GPIO pins configuration is as follows:</p>
<table class="doxtable">
<tr>
<th>GPIO pin </th><th>Function  </th></tr>
<tr>
<td>P1.3 </td><td>UART2 TX </td></tr>
<tr>
<td>P2.3 </td><td>UART2 RX </td></tr>
<tr>
<td>P1.6 </td><td>UART2 CTS </td></tr>
</table>
<p>UART settings are as follows:</p>
<table class="doxtable">
<tr>
<th>Setting </th><th>Value  </th></tr>
<tr>
<td>Baudrate </td><td>115200 </td></tr>
<tr>
<td>Data bits </td><td>8 </td></tr>
<tr>
<td>Stop bits </td><td>1 </td></tr>
<tr>
<td>Parity </td><td>None </td></tr>
<tr>
<td>Flow control </td><td>RTS/CTS </td></tr>
</table>
<p>Once the application has started, 'Advertising started...' message will be printed out.</p>
<h3>GPIO configuration</h3>
<p>The application can be controlled using GPIO settings and button presses. To enable this function, POWER_DEMO_GPIO_CONFIGURATION macro in file 'config/power_demo_config.h' must be set to 1.</p>
<p>Button must be connected to P1.0. To trigger action, connect pins of configuration type and configuration index from table below. I.e. to set second advertising channel map configuration, connect P1.2 and P1.5 to VCC, P1.4 and P1.7 to GND, then press button.</p>
<table class="doxtable">
<tr>
<th>Configuration type </th><th>P1.2 </th><th>P1.4  </th></tr>
<tr>
<td>Advertising interval </td><td>GND </td><td>GND </td></tr>
<tr>
<td>Advertising channel map </td><td>VCC </td><td>GND </td></tr>
<tr>
<td>Recharge period </td><td>GND </td><td>VCC </td></tr>
<tr>
<td>Connection param update </td><td>VCC </td><td>VCC </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Configuration idx </th><th>P1.5 </th><th>P1.7  </th></tr>
<tr>
<td>0 </td><td>GND </td><td>GND </td></tr>
<tr>
<td>1 </td><td>VCC </td><td>GND </td></tr>
<tr>
<td>2 </td><td>GND </td><td>VCC </td></tr>
<tr>
<td>3 </td><td>VCC </td><td>VCC </td></tr>
</table>
<h3>Triggering actions</h3>
<h4>Set advertising interval</h4>
<p>This option allows to set advertising interval.</p>
<table class="doxtable">
<tr>
<th>Configuration idx </th><th>Interval min [ms] </th><th>Interval max [ms]  </th></tr>
<tr>
<td>0 </td><td>400 </td><td>600 </td></tr>
<tr>
<td>1 </td><td>30 </td><td>60 </td></tr>
<tr>
<td>2 </td><td>1000 </td><td>1200 </td></tr>
</table>
<p>Using serial console, type <b><code>set_adv_interval &lt;cfg_idx&gt;</code></b>. I.e., after typing 'set_adv_interval 1': </p><pre class="fragment">Set advertising interval
        Interval min: 0x001E ms
        Interval max: 0x003C ms
Advertising stopped
Advertising started...
</pre><p>Using GPIO, connect P1.2 and P1.4 to GND and select configuration index using table from GPIO configuration.</p>
<h4>Set channel map</h4>
<p>This option allows to set channel map configuration.</p>
<table class="doxtable">
<tr>
<th>Configuration idx </th><th>Channel map  </th></tr>
<tr>
<td>0 </td><td>37 and 38 and 39 </td></tr>
<tr>
<td>1 </td><td>38 and 39 </td></tr>
</table>
<p>Using serial console, type <b><code>set_adv_channel_map &lt;cfg_idx&gt;</code></b>. I.e., after typing 'set_adv_channel_map 1': </p><pre class="fragment">Set advertising channel map to: 0x06
Advertising stopped
Advertising started...
</pre><p>Using GPIO, connect P1.2 to VCC and P1.4 to GND and select configuration index using table from GPIO configuration.</p>
<h4>Set recharge period</h4>
<p>This option allows to set recharge priod.</p>
<table class="doxtable">
<tr>
<th>Configuration idx </th><th>Recharge period  </th></tr>
<tr>
<td>0 </td><td>3000 </td></tr>
<tr>
<td>1 </td><td>100 </td></tr>
<tr>
<td>2 </td><td>900 </td></tr>
</table>
<p>Using serial console, type <b><code>set_recharge_period &lt;cfg_idx&gt;</code></b>. I.e., after typing 'set_recharge_period 1': </p><pre class="fragment">Set recharge period to: 0x0064
</pre><p>Using GPIO, connect P1.2 to GND and P1.4 to VCC and select configuration index using table from GPIO configuration.</p>
<h4>Set connection parameters</h4>
<p>This option allows to update connection parameters (any device must be connected to platform).</p>
<table class="doxtable">
<tr>
<th>Configuration idx </th><th>Interval min [ms] </th><th>Interval max [ms] </th><th>Slave latency </th><th>Sup. timeout [ms]  </th></tr>
<tr>
<td>0 </td><td>400 </td><td>600 </td><td>0 </td><td>1500 </td></tr>
<tr>
<td>1 </td><td>10 </td><td>15 </td><td>0 </td><td>100 </td></tr>
<tr>
<td>2 </td><td>1000 </td><td>1200 </td><td>0 </td><td>3000 </td></tr>
</table>
<p>Using serial console, type <b><code>conn_param_update &lt;cfg_idx&gt;</code></b>. I.e., after typing 'conn_param_update 1': </p><pre class="fragment">Connection param update
        Interval min: 0x000A ms
        Interval max: 0x000F ms
        Slave latency: 0x0000 ms
        Supervision timeout: 0x0064 ms
</pre><p>Using GPIO, connect P1.2 and P1.4 to VCC and select configuration index using table from GPIO configuration. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 19 2018 07:50:05 for SmartSnippets DA1468x/DA15xxx SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
